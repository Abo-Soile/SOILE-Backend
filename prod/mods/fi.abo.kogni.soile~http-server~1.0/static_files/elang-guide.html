<!DOCTYPE html><html><head><meta charset="utf-8"><style>html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }

body{
  color:#444;
  font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman',
              "Hiragino Sans GB", "STXihei", "微软雅黑", serif;
  font-size:12px;
  line-height:1.5em;
  background:#fefefe;
  width: 45em;
  margin: 10px auto;
  padding: 1em;
  outline: 1300px solid #FAFAFA;
}

a{ color: #0645ad; text-decoration:none;}
a:visited{ color: #0b0080; }
a:hover{ color: #06e; }
a:active{ color:#faa700; }
a:focus{ outline: thin dotted; }
a:hover, a:active{ outline: 0; }

span.backtick {
  border:1px solid #EAEAEA;
  border-radius:3px;
  background:#F8F8F8;
  padding:0 3px 0 3px;
}

::-moz-selection{background:rgba(255,255,0,0.3);color:#000}
::selection{background:rgba(255,255,0,0.3);color:#000}

a::-moz-selection{background:rgba(255,255,0,0.3);color:#0645ad}
a::selection{background:rgba(255,255,0,0.3);color:#0645ad}

p{
margin:1em 0;
}

img{
max-width:100%;
}

h1,h2,h3,h4,h5,h6{
font-weight:normal;
color:#111;
line-height:1em;
}
h4,h5,h6{ font-weight: bold; }
h1{ font-size:2.5em; }
h2{ font-size:2em; border-bottom:1px solid silver; padding-bottom: 5px; }
h3{ font-size:1.5em; }
h4{ font-size:1.2em; }
h5{ font-size:1em; }
h6{ font-size:0.9em; }

blockquote{
color:#666666;
margin:0;
padding-left: 3em;
border-left: 0.5em #EEE solid;
}
hr { display: block; height: 2px; border: 0; border-top: 1px solid #aaa;border-bottom: 1px solid #eee; margin: 1em 0; padding: 0; }


pre , code, kbd, samp { 
  color: #000; 
  font-family: monospace; 
  font-size: 0.88em; 
  border-radius:3px;
  background-color: #F8F8F8;
  border: 1px solid #CCC; 
}
pre { white-space: pre; white-space: pre-wrap; word-wrap: break-word; padding: 5px 12px;}
pre code { border: 0px !important; padding: 0;}
code { padding: 0 3px 0 3px; }

b, strong { font-weight: bold; }

dfn { font-style: italic; }

ins { background: #ff9; color: #000; text-decoration: none; }

mark { background: #ff0; color: #000; font-style: italic; font-weight: bold; }

sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }

ul, ol { margin: 1em 0; padding: 0 0 0 2em; }
li p:last-child { margin:0 }
dd { margin: 0 0 0 2em; }

img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }

table { border-collapse: collapse; border-spacing: 0; }
td { vertical-align: top; }

@media only screen and (min-width: 480px) {
body{font-size:14px;}
}

@media only screen and (min-width: 768px) {
body{font-size:16px;}
}

@media print {
  * { background: transparent !important; color: black !important; filter:none !important; -ms-filter: none !important; }
  body{font-size:12pt; max-width:100%; outline:none;}
  a, a:visited { text-decoration: underline; }
  hr { height: 1px; border:0; border-bottom:1px solid black; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; padding-right: 1em; page-break-inside: avoid; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page :left { margin: 15mm 20mm 15mm 10mm; }
  @page :right { margin: 15mm 10mm 15mm 20mm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
}
</style><title>elang-guide</title></head><body><h1 id="elang-documentation">Elang Documentation</h1>
<p>This document contains documentation for the experiment language.</p>
<h2 id="structure">Structure</h2>
<p>Val and gvar definitons</p>
<p>function definitons</p>
<p>phase definitions</p>
<p>phase transitions</p>
<h2 id="variables">Variables</h2>
<p><strong>gvar</strong> Global variable, useable everywhere</p>
<p><strong>val</strong> static global value, cannot be modified after definition</p>
<p><strong>var</strong> Normal variable, visible only in the current function/phase.</p>
<p>A variable definition contains: "variabletype" "variable name" &lt;- "value". Also note that variable definitions must be done in the beginning of the program (gvar and val) or in the beginning of a function/phase definition (var). </p>
<pre><code># Creates a variable named a and assigns it's value to the string "asdf"
var a &lt;- "asdf"

# Changes a's value from "asdf" to "qwerty"
a &lt;- "qwerty"
</code></pre>
<h2 id="phases-and-transitions">Phases and transitions</h2>
<p>intermezzo-phase
information-phase
intraction-phase</p>
<h2 id="builtin-functions">Builtin functions</h2>
<p>Builtin functions are functions that are called and executed from a experiment by the user. </p>
<h3 id="input">Input</h3>
<h4 id="mouse">Mouse</h4>
<p><strong>onmouseclick(imagefile, {action: function, inputid: number, resettimer: bool})</strong></p>
<p>Creates a mouseclick listener for the object/image, which will be triggered when the image is clicked. The function specified in "action" is executed on each click. </p>
<p><strong>onmouseclick(imagefile, false)</strong></p>
<p>Removes all mouseclick functions bound to the specified object.</p>
<h4 id="keyboard">Keyboard</h4>
<p><strong>onkeypress(key, func)</strong>
Binds the specified key to a function so that the function is run every time when the key is pressed.</p>
<p><strong>onkeypress(key)</strong>
Removes all actionss bound to the specified key.</p>
<pre><code>function leftclick()
    showmsg("left was clicked")
end

onkeypress("left", leftclick)
</code></pre>
<p>Example: the function leftclick is run each time when the left arrow is clicked on the keyboard.</p>
<h3 id="arithmetic">Arithmetic</h3>
<h4 id="basic">Basic</h4>
<p><strong>plus(number1 number2)</strong> number1 + number2</p>
<p><strong>minus(number1 number2)</strong> number1 - number2</p>
<p><strong>multiply(number1 number2)</strong> number1 * number2</p>
<p><strong>divide(number1 number2)</strong> number1 / number2</p>
<h4 id="logic">Logic</h4>
<p><strong>not(boolean)</strong></p>
<p><strong>and(bool1 bool2)</strong></p>
<p><strong>or(bool1 bool2)</strong></p>
<p><strong>lessthan(number1 number2 <em>or</em> lt(number1 number2))</strong> number1 &lt; number2</p>
<p><strong>greaterthan(number1 number2) <em>or</em> gt(number1 number2)</strong> number1 &gt; number2</p>
<p><strong>equal(number1 number2) <em>or</em> eq(number1 number2)</strong> number1 == number2</p>
<h3 id="functions">Functions</h3>
<h4 id="random-numbers">Random numbers</h4>
<p><strong>randominteger(min, max)</strong>
returns a pseudorandom non decimal number within the range.</p>
<p><strong>randomnumber(min, max)</strong>
Returns a pseudorandom number value within the range</p>
<p><strong>seedrandom(seed)</strong>
Seeds the random generator with  a value. A certain seed will always produce the same sequence of random values. </p>
<h4 id="time-and-timers">Time and timers</h4>
<p><strong>recordts()</strong>
Returns a timestamp with the current time with m,illisecond precision. Timestamps can easily be compared with basic arithmetic operations.</p>
<p><strong>starttimer()</strong>
Starts the timer.</p>
<p><strong>elapsedtime()</strong>
Returns time elapsed, in ms, since the last call top starttimer. Returns 0 if no timer has been started. </p>
<h4 id="result-storage">Result storage</h4>
<p>Results are stored in two tables, raw data and aggregated data. The aggregated data will only produce one row per user while any number of rows can be used for raw data. </p>
<p><strong>storeSingle(field data)</strong></p>
<p>Stores a single value with the specified fieldname in the aggregated datatable. </p>
<p><strong>storeRow(string field data)</strong></p>
<p>Stores a value with the given fieldname in the current raw datarow. </p>
<p><strong>newRow()</strong>
Creates a new empty row to write raw data to.</p>
<h5 id="data-processing-and-aggregation">Data processing and aggregation</h5>
<p>Raw data can be processed to something more usable. An aggregation function loops through the whole raw data table and performs the specified function on every field that it finds. Rows that don't have any value in the specific field are simply omitted. Results are stored in the processed data table in the fi</p>
<p><strong>count(field)</strong></p>
<p>Counts how many rows contain the specific field.</p>
<p><strong>count(field, value)</strong></p>
<p>Counts how many rows contain a specific field with a specific value.</p>
<p><strong>average(field)</strong></p>
<p>Computes the average value from all rows containing this field.</p>
<pre><code>Not implemented yet
median(field)
sum(field)
</code></pre>
<h2 id="rt-runtime-functions">RT - Runtime functions</h2>
<p>Rt functions operate within the vm and should not be called by users. They are only used to manage and run the vm.</p></body></html>