<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Demo</title>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <style type="text/css">
      #hidden {
        display: none;
      }
      
      #page {
        width: 960px;
        margin-left: auto;
        margin-right: auto;
      }
      
      #display {
        border: thin solid black;
        width: 720px;
        height: 360px;
        position: relative;
      }
    </style>
  </head>
  <body>
    <div id="page">
      <div>
        <textarea id="markup" rows="20" cols="100">Markup code here.</textarea>
        
        <p>
          <button id="runbutton">
            Run
          </button>
        </p>
      </div>
      
      <div id="display">
        
      </div>
    </div>
    
    <div id="hidden">
      <img src="https://cdn1.iconfinder.com/data/icons/30_Free_Black_ToolBar_Icons/40/Black_Star.png"
           alt="black star"
           id="imgblackstart" />
      <img src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Full_Star_Yellow.svg/64px-Full_Star_Yellow.svg.png"
           alt="yellow star"
           id="imgyellowstart" />
    </div>
    
    <script>
		$(document).ready(function(){
		  var width = Math.min($('#markup').width(), $('#display').width());
      
      $('#markup').width(width);
      $('#display').width(width);
	  
		  $('#runbutton').click(function(event){
		    $.post('/experiment/load', function(data, textStatus, jqXHR){
		      data = jQuery.parseJSON(data);
		      jQuery.globalEval(data.code);
		      jQuery('<img />', {
		        src: "http://i1177.photobucket.com/albums/x358/My_So_Called_Homeschool_Life/bth_smiley-face.jpg",
		        alt: "smiling face"
		      }).appendTo('#page');;
		    }, 'text');
		  });
		});
    </script>
  </body>
</html>
