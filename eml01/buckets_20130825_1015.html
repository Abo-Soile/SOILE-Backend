<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="https://raw.github.com/mauriciosantos/buckets/master/buckets-minified.js"></script>
    <title>buckets</title>
  </head>
  <body>
    <h1>buckets</h1>
    
    <p>
      Has Object.freeze: <span id="freeze">&nbsp;</span>
    </p>
    
    <script>
		$(document).ready(function(){
		  'use strict';
		  
		  var SOILE2 = {};
		  
		  (function(soile2){
		    
		    var runtime = {};
		    var builtin = {};
		    
		    runtime.freeze = (function(){
          if (Object.freeze !== undefined || typeof Object.freeze === 'function') {
            return function(obj){
              return Object.freeze(obj);
            };
          }
          return function(obj){
            return obj;
          };
        })();

        runtime.kbdlookup = function(){};
        
        runtime.scheduler = (function(_runtime){
          
          /*
           * Methods 
           *   o schedule
           *   o unschedule
           */  
          
        })(runtime);
        
        runtime.seal = (function(){
          if (Object.seal !== undefined || typeof Object.seal === 'function') {
            return function(obj){
              return Object.seal(obj);
            };
          }
          return function(obj){return obj;};
        })();
        
        runtime.timestamp = (function(){
          // http://stackoverflow.com/questions/221294/how-do-you-get-a-timestamp-in-javascript
          if (Date.now !== undefined && typeof Date.now == 'function') {
            return function(){
              return Date.now();
            };
          }
          return function(){
            return (new Date()).getTime();
          };
        })();
		    
        soile2['runtime'] = runtime;
        soile2['builtin'] = builtin;
        
        runtime.freeze(soile2);
        
		  })(SOILE2);
		  
		  setTimeout(function(){
		    var msgFreeze = 'yes';
        var msgSeal = 'yes';
        var hasObjectFreeze = function(){
          if (Object.freeze !== undefined || typeof Object.freeze === 'function') {
            return true;
          }
          return false;
        };
        var freezeObject = (function(){
          if (hasObjectFreeze() === true) {
            return function(obj){
              return Object.freeze(obj);
            };
          }
          return function(obj){return obj;};
        })();
        var hasObjectSeal = function(){
          if (Object.seal !== undefined || typeof Object.seal === 'function') {
            return true;
          }
          return false;
        };

		    if (hasObjectFreeze() === false) {
		      msgFreeze = 'no';
		    };
		    $('#freeze').text(msgFreeze);
		  }, 1000);
		});
    </script>
  </body>
</html>
