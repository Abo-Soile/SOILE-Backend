{>header_nodojo /}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>

<div id="main" class="container">
  <div class="row">
    <div id="expview" class="col-md-9"> 

      <div class="row">
        <div class="col-md-12">
          <h1>{training.name}  </h1>
          <p> {training.description|s}</p>
          <!--<p> {status|js}</p>-->
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="progress">
            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{status.percentageLeft}" aria-valuemin="0" aria-valuemax="100" style="width: {status.percentageLeft}%">
              {status.percentageLeft}%
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <div class="infopanel">
                <h4>Next task available in</h4>
                <p>{status.timeLeft}</p> 
              </div>
            </div>

            <div class="col-md-4">
              <div class="infopanel">
                <h4>Progress</h4>   
                <p> {status.roundsLeft} </p>
              </div>
            </div> 
          
            <!--<div class="col-md-4">
              <div class="infopanel">
                <h4>Time left</h4>
                <p> {status.totalTimeLeft}</p>
              </div>
            </div>--> 
          </div>
        
        </div>
      </div>

      <div class="row">

        <div class="col-md-12">
          <div id="chartcontainer" class="">  
          </div>

        </div>
        <div class="col-md-12">
          {?status.timeLeft}
          <h3>Next task is available {status.timeLeft}</h3>
          {:else}
          <a href="{URI}/execute">Run next phase</a>
          {/status.timeLeft}
        </div>
      </div>

    </div>
  </div>
</div>


<script type="text/javascript">
  
$(function () {
  var score = [{status.scoreHistory}];
    $('#chartcontainer').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Score'
        },
        xAxis: {
            /*categories: [
              1,2,3,4,5,6,7,8,9,10
            ],*/
            crosshair: true
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Score'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f} points </b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: 'Score',
            data: score
        }]
    });
});

</script>
{>footer /}